<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Miray Çınar &amp; Ecenaz Tunç">

<title>STAT570 - Final Project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="STAT570 Final Project_files/libs/clipboard/clipboard.min.js"></script>
<script src="STAT570 Final Project_files/libs/quarto-html/quarto.js"></script>
<script src="STAT570 Final Project_files/libs/quarto-html/popper.min.js"></script>
<script src="STAT570 Final Project_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="STAT570 Final Project_files/libs/quarto-html/anchor.min.js"></script>
<link href="STAT570 Final Project_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="STAT570 Final Project_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="STAT570 Final Project_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="STAT570 Final Project_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="STAT570 Final Project_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#data-description" id="toc-data-description" class="nav-link" data-scroll-target="#data-description">Data Description</a></li>
  <li><a href="#import-the-data" id="toc-import-the-data" class="nav-link" data-scroll-target="#import-the-data">Import the Data</a></li>
  <li><a href="#investigating-the-columns" id="toc-investigating-the-columns" class="nav-link" data-scroll-target="#investigating-the-columns">Investigating the Columns</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">STAT570 - Final Project</h1>
<p class="subtitle lead">Data Scientist Job Posting Data</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Miray Çınar &amp; Ecenaz Tunç </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>----</p>
</section>
<section id="data-description" class="level2">
<h2 class="anchored" data-anchor-id="data-description">Data Description</h2>
<p>----</p>
</section>
<section id="import-the-data" class="level2">
<h2 class="anchored" data-anchor-id="import-the-data">Import the Data</h2>
<p>Let’s start by importing the data. Fist, import the required libraries. If you don’t already have them, you can use <code>install.packages()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.4.4     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"Uncleaned_DS_jobs.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 672 Columns: 15
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (12): Job Title, Salary Estimate, Job Description, Company Name, Locatio...
dbl  (3): index, Rating, Founded

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
<p>Let’s start by investigating our dataset a little bit, by getting a glimpse and see the structure of the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Uncleaned_DS_jobs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 672
Columns: 15
$ index               &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, …
$ `Job Title`         &lt;chr&gt; "Sr Data Scientist", "Data Scientist", "Data Scien…
$ `Salary Estimate`   &lt;chr&gt; "$137K-$171K (Glassdoor est.)", "$137K-$171K (Glas…
$ `Job Description`   &lt;chr&gt; "Description\n\nThe Senior Data Scientist is respo…
$ Rating              &lt;dbl&gt; 3.1, 4.2, 3.8, 3.5, 2.9, 4.2, 3.9, 3.5, 4.4, 3.6, …
$ `Company Name`      &lt;chr&gt; "Healthfirst\n3.1", "ManTech\n4.2", "Analysis Grou…
$ Location            &lt;chr&gt; "New York, NY", "Chantilly, VA", "Boston, MA", "Ne…
$ Headquarters        &lt;chr&gt; "New York, NY", "Herndon, VA", "Boston, MA", "Bad …
$ Size                &lt;chr&gt; "1001 to 5000 employees", "5001 to 10000 employees…
$ Founded             &lt;dbl&gt; 1993, 1968, 1981, 2000, 1998, 2010, 1996, 1990, 19…
$ `Type of ownership` &lt;chr&gt; "Nonprofit Organization", "Company - Public", "Pri…
$ Industry            &lt;chr&gt; "Insurance Carriers", "Research &amp; Development", "C…
$ Sector              &lt;chr&gt; "Insurance", "Business Services", "Business Servic…
$ Revenue             &lt;chr&gt; "Unknown / Non-Applicable", "$1 to $2 billion (USD…
$ Competitors         &lt;chr&gt; "EmblemHealth, UnitedHealth Group, Aetna", "-1", "…</code></pre>
</div>
</div>
<p>And also take a quick summary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     index        Job Title         Salary Estimate    Job Description   
 Min.   :  0.0   Length:672         Length:672         Length:672        
 1st Qu.:167.8   Class :character   Class :character   Class :character  
 Median :335.5   Mode  :character   Mode  :character   Mode  :character  
 Mean   :335.5                                                           
 3rd Qu.:503.2                                                           
 Max.   :671.0                                                           
     Rating       Company Name         Location         Headquarters      
 Min.   :-1.000   Length:672         Length:672         Length:672        
 1st Qu.: 3.300   Class :character   Class :character   Class :character  
 Median : 3.800   Mode  :character   Mode  :character   Mode  :character  
 Mean   : 3.519                                                           
 3rd Qu.: 4.300                                                           
 Max.   : 5.000                                                           
     Size              Founded     Type of ownership    Industry        
 Length:672         Min.   :  -1   Length:672         Length:672        
 Class :character   1st Qu.:1918   Class :character   Class :character  
 Mode  :character   Median :1995   Mode  :character   Mode  :character  
                    Mean   :1636                                        
                    3rd Qu.:2009                                        
                    Max.   :2019                                        
    Sector            Revenue          Competitors       
 Length:672         Length:672         Length:672        
 Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character  
                                                         
                                                         
                                                         </code></pre>
</div>
</div>
<p>From both <code>glimpse()</code> and <code>summary()</code> outputs, we can see that, categorical variables are in character form. We will investigate them one by one later on.</p>
<p>But first, let’s change the column names that have blank spaces so that it will be much easy to make the analyses later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="ot">&lt;-</span> Uncleaned_DS_jobs <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Job_Title =</span> <span class="st">`</span><span class="at">Job Title</span><span class="st">`</span>, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Salary_Estimate =</span> <span class="st">`</span><span class="at">Salary Estimate</span><span class="st">`</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Job_Description =</span> <span class="st">`</span><span class="at">Job Description</span><span class="st">`</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">Company_Name =</span> <span class="st">`</span><span class="at">Company Name</span><span class="st">`</span>, </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">Type_of_Ownership =</span>  <span class="st">`</span><span class="at">Type of ownership</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Take a summary again to see the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     index        Job_Title         Salary_Estimate    Job_Description   
 Min.   :  0.0   Length:672         Length:672         Length:672        
 1st Qu.:167.8   Class :character   Class :character   Class :character  
 Median :335.5   Mode  :character   Mode  :character   Mode  :character  
 Mean   :335.5                                                           
 3rd Qu.:503.2                                                           
 Max.   :671.0                                                           
     Rating       Company_Name         Location         Headquarters      
 Min.   :-1.000   Length:672         Length:672         Length:672        
 1st Qu.: 3.300   Class :character   Class :character   Class :character  
 Median : 3.800   Mode  :character   Mode  :character   Mode  :character  
 Mean   : 3.519                                                           
 3rd Qu.: 4.300                                                           
 Max.   : 5.000                                                           
     Size              Founded     Type_of_Ownership    Industry        
 Length:672         Min.   :  -1   Length:672         Length:672        
 Class :character   1st Qu.:1918   Class :character   Class :character  
 Mode  :character   Median :1995   Mode  :character   Mode  :character  
                    Mean   :1636                                        
                    3rd Qu.:2009                                        
                    Max.   :2019                                        
    Sector            Revenue          Competitors       
 Length:672         Length:672         Length:672        
 Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character  
                                                         
                                                         
                                                         </code></pre>
</div>
</div>
<p>From our summary, we can also see some strange values are present in the data. For instance there are some rows marked as “-1” in the Headquarters, Founded.</p>
</section>
<section id="investigating-the-columns" class="level2">
<h2 class="anchored" data-anchor-id="investigating-the-columns">Investigating the Columns</h2>
<p>Let’s investigate the columns one by one:</p>
<ul>
<li><p>Index</p>
<p>Index column is not necessary for us, so we will remove it from our data set.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>index <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Rating</li>
</ul>
<p>We realized that from the summary, Rating has a minimum value as -1, but the rating should be between 1 to 5.</p>
<p>We need to fix that problem.</p>
<p>To fix this, first we need to look how many data are there with Rating = -1:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Uncleaned_DS_jobs<span class="sc">$</span>Rating <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 50</code></pre>
</div>
</div>
<p>We have 50 values with Rating = -1.</p>
<p>And after looking in a more detailed way, we realize that the foundation year of the companies have a value -1 also we need check for them</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Uncleaned_DS_jobs<span class="sc">$</span>Founded <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 118</code></pre>
</div>
</div>
<p>And we can look how many rows have -1 foundation year and -1 rating:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Uncleaned_DS_jobs<span class="sc">$</span>Founded <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span> <span class="sc">&amp;</span> Uncleaned_DS_jobs<span class="sc">$</span>Rating <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 49</code></pre>
</div>
</div>
<p>Foundation year and rating variable should not be -1.</p>
<p>So firstly for the rating variable we give change -1 to 0.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Rating[Uncleaned_DS_jobs<span class="sc">$</span>Rating <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Founded[Uncleaned_DS_jobs<span class="sc">$</span>Founded <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now lets check if it worked,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>Rating)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   3.300   3.800   3.593   4.300   5.000 </code></pre>
</div>
</div>
<p>As can be seen from the summary of the rating we fix the -1 problem.</p>
<ul>
<li>Founded</li>
</ul>
<p>And we can do this same process the Founded variable. We can use mean imputation method:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>founded_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(Uncleaned_DS_jobs<span class="sc">$</span>Founded, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Founded[<span class="fu">is.na</span>(Uncleaned_DS_jobs<span class="sc">$</span>Founded)] <span class="ot">&lt;-</span> founded_mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>Founded)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   1781    1983    1995    1984    2009    2019 </code></pre>
</div>
</div>
<p>From the summary we also fix the problem for Founded.</p>
<ul>
<li>Company Name</li>
</ul>
<p>When we check the Company Name variable, we see that it also has the Rating next to it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs[, <span class="fu">c</span>(<span class="st">"Company_Name"</span>, <span class="st">"Rating"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  Company_Name              Rating
  &lt;chr&gt;                      &lt;dbl&gt;
1 "Healthfirst\n3.1"           3.1
2 "ManTech\n4.2"               4.2
3 "Analysis Group\n3.8"        3.8
4 "INFICON\n3.5"               3.5
5 "Affinity Solutions\n2.9"    2.9
6 "HG Insights\n4.2"           4.2</code></pre>
</div>
</div>
<p>We can separate them and get rid of the Rating variable inside of Company Name to clean this variable. We can do this by <code>str_replace()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Company_Name <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(Uncleaned_DS_jobs<span class="sc">$</span>Company_Name, <span class="st">"</span><span class="sc">\n</span><span class="st">[0-9.]+$"</span>, <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have cleaned the Company Name variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs[, <span class="fu">c</span>(<span class="st">"Company_Name"</span>, <span class="st">"Rating"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 2
  Company_Name       Rating
  &lt;chr&gt;               &lt;dbl&gt;
1 Healthfirst           3.1
2 ManTech               4.2
3 Analysis Group        3.8
4 INFICON               3.5
5 Affinity Solutions    2.9
6 HG Insights           4.2</code></pre>
</div>
</div>
<p>And we can see that how many of the Company Names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Company_Name, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 432 × 2
   Company_Name                     n
   &lt;chr&gt;                        &lt;int&gt;
 1 Hatch Data Inc                  12
 2 Maxar Technologies              12
 3 Tempus Labs                     11
 4 AstraZeneca                     10
 5 Klaviyo                          8
 6 Autodesk                         7
 7 Phoenix Operations Group         7
 8 Novetta                          6
 9 Southwest Research Institute     6
10 MassMutual                       5
# ℹ 422 more rows</code></pre>
</div>
</div>
<p>We can see that the company with the most positions opened is “Hatch Data Inc” and “Maxar Technologies” with 12 positions opened.</p>
<ul>
<li>Size</li>
</ul>
<p>As can be seen from the summary that we have -1 for the Size. But we have unknown category for this variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Size))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                     -1       1 to 50 employees        10000+ employees 
                     27                      86                      80 
 1001 to 5000 employees    201 to 500 employees 5001 to 10000 employees 
                    104                      85                      61 
  501 to 1000 employees     51 to 200 employees                 Unknown 
                     77                     135                      17 </code></pre>
</div>
</div>
<p>So we can assign “-1” to “Unknown” category for this variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Size[Uncleaned_DS_jobs<span class="sc">$</span>Size <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"Unknown"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Size))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      1 to 50 employees        10000+ employees  1001 to 5000 employees 
                     86                      80                     104 
   201 to 500 employees 5001 to 10000 employees   501 to 1000 employees 
                     85                      61                      77 
    51 to 200 employees                 Unknown 
                    135                      44 </code></pre>
</div>
</div>
<ul>
<li>Competitors</li>
</ul>
<p>There are -1 values in Competitors. We don’t know their competitors’ name so we can attribute them to no information</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Competitors[Uncleaned_DS_jobs<span class="sc">$</span>Competitors <span class="sc">==</span> <span class="st">"-1"</span>] <span class="ot">&lt;-</span> <span class="st">"No information"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Competitors), <span class="at">maxsum =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                             No information 
                                                        501 
                           Roche, GlaxoSmithKline, Novartis 
                                                         10 
            Leidos, CACI International, Booz Allen Hamilton 
                                                          6 
Los Alamos National Laboratory, Battelle, SRI International 
                                                          6 
                            Battelle, General Atomics, SAIC 
                                                          3 
                                                    (Other) 
                                                        146 </code></pre>
</div>
</div>
<ul>
<li>Location</li>
</ul>
<p>Let’s see the location variable first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Location), <span class="at">maxsum =</span> <span class="dv">6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>San Francisco, CA      New York, NY    Washington, DC        Boston, MA 
               69                50                26                24 
      Chicago, IL           (Other) 
               22               481 </code></pre>
</div>
</div>
<p>In the Location variable, we can see that they are written with the state which they are in. So we want to separate them. For this, we can use <code>separate_wider_delim()</code> function.</p>
<p>But, we receive an error here.</p>
<p><img src="images/error.PNG" class="img-fluid"></p>
<p>From the error, we can see that some rows are too short. Let’s see that columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_count</span>(Location, <span class="st">",</span><span class="sc">\\</span><span class="st">s+"</span>) <span class="sc">!=</span> <span class="dv">1</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Location) <span class="sc">%&gt;%</span> <span class="fu">distinct_all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 1
  Location                  
  &lt;chr&gt;                     
1 Remote                    
2 United States             
3 Utah                      
4 New Jersey                
5 Texas                     
6 Patuxent, Anne Arundel, MD
7 California                </code></pre>
</div>
</div>
<p>From this output, we can see that we have “Remote”, “United States”, locations that have the same names as their states; “Utah”, “New Jersey”, “Texas” and “California”, and “Patuxent, Anne Arundel, MD” which is a region for the Anne Arundel county. So, we will add information for this columns firstly, then we will separate the Location and States. For this, we will use <code>str_replace()</code> function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define replacements using case_when</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="ot">&lt;-</span> Uncleaned_DS_jobs <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Location =</span> <span class="fu">case_when</span>(</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"Remote"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"Remote"</span>, <span class="st">"Remote, Remote"</span>),</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"United States"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"United States"</span>, <span class="st">"United States, United States"</span>),</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"Utah"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"Utah"</span>, <span class="st">"Utah, Utah"</span>),</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"New Jersey"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"New Jersey"</span>, <span class="st">"New Jersey, New Jersey"</span>),</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"Texas"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"Texas"</span>, <span class="st">"Texas, Texas"</span>),</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"California"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"California"</span>, <span class="st">"California, California"</span>),</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>      Location <span class="sc">==</span> <span class="st">"Patuxent, Anne Arundel, MD"</span> <span class="sc">~</span> <span class="fu">str_replace</span>(Location, <span class="st">"Patuxent, Anne Arundel, MD"</span>, <span class="st">"Anne Arundel, MD"</span>),</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> Location</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s check them again:</p>
<ul>
<li>Headquarters</li>
</ul>
<p>For the headquarters we have -1 values also,</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Uncleaned_DS_jobs<span class="sc">$</span>Headquarters <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 31</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Headquarters[Uncleaned_DS_jobs<span class="sc">$</span>Headquarters <span class="sc">==</span> <span class="st">"-1"</span>] <span class="ot">&lt;-</span> <span class="st">"No information"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Type Of Ownership</li>
</ul>
<p>There are -1 values in the Type of Ownership also.</p>
<p>We check how many -1 values are in the variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Uncleaned_DS_jobs<span class="sc">$</span>Type_of_Ownership <span class="sc">==</span> <span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Competitors[Uncleaned_DS_jobs<span class="sc">$</span>Type_of_Ownership <span class="sc">==</span> <span class="st">"-1"</span>] <span class="ot">&lt;-</span> <span class="st">"No information"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s see the summary:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Type_of_Ownership))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            -1           College / University 
                            27                              3 
             Company - Private               Company - Public 
                           397                            153 
                      Contract                     Government 
                             2                             10 
                      Hospital         Nonprofit Organization 
                             1                             36 
            Other Organization        Private Practice / Firm 
                             5                              4 
                 Self-employed Subsidiary or Business Segment 
                             2                             28 
                       Unknown 
                             4 </code></pre>
</div>
</div>
<ul>
<li>Salary Estimation</li>
</ul>
<p>For Salary Estimate column, let’s see the unique values we have:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "$101K-$165K (Glassdoor est.)" "$105K-$167K (Glassdoor est.)"
 [3] "$110K-$163K (Glassdoor est.)" "$112K-$116K (Glassdoor est.)"
 [5] "$122K-$146K (Glassdoor est.)" "$124K-$198K (Glassdoor est.)"
 [7] "$128K-$201K (Glassdoor est.)" "$137K-$171K (Glassdoor est.)"
 [9] "$138K-$158K (Glassdoor est.)" "$141K-$225K (Glassdoor est.)"
[11] "$145K-$225K(Employer est.)"   "$212K-$331K (Glassdoor est.)"
[13] "$31K-$56K (Glassdoor est.)"   "$56K-$97K (Glassdoor est.)"  
[15] "$66K-$112K (Glassdoor est.)"  "$69K-$116K (Glassdoor est.)" 
[17] "$71K-$123K (Glassdoor est.)"  "$75K-$131K (Glassdoor est.)" 
[19] "$79K-$106K (Glassdoor est.)"  "$79K-$131K (Glassdoor est.)" 
[21] "$79K-$133K (Glassdoor est.)"  "$79K-$147K (Glassdoor est.)" 
[23] "$80K-$132K (Glassdoor est.)"  "$87K-$141K (Glassdoor est.)" 
[25] "$90K-$109K (Glassdoor est.)"  "$90K-$124K (Glassdoor est.)" 
[27] "$91K-$150K (Glassdoor est.)"  "$92K-$155K (Glassdoor est.)" 
[29] "$95K-$119K (Glassdoor est.)"  "$99K-$132K (Glassdoor est.)" </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(<span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>From this output, we can see that we have common shape for the salary estimates with 0 NA values. We can separate this column into two separate columns for obtaining lower and upper limits for the salary estimates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove spaces in the column </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces <span class="ot">&lt;-</span> Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">" "</span>, <span class="st">""</span>,Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate)  </span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the updated data frame </span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "$137K-$171K(Glassdoorest.)" "$137K-$171K(Glassdoorest.)"
[3] "$137K-$171K(Glassdoorest.)" "$137K-$171K(Glassdoorest.)"
[5] "$137K-$171K(Glassdoorest.)" "$137K-$171K(Glassdoorest.)"</code></pre>
</div>
</div>
<p>Now we have no blank space between the words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## str_view(Uncleaned_DS_jobs$Salary_Estimate_wo_spaces, "[a-z0-9]+")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s get rid of the parts at the end; Glassdoor est. and Employer est.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces <span class="ot">&lt;-</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"K</span><span class="sc">\\</span><span class="st">(Glassdoorest.</span><span class="sc">\\</span><span class="st">)"</span>,</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">""</span>,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>       Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces <span class="ot">&lt;-</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gsub</span>(<span class="st">"K</span><span class="sc">\\</span><span class="st">(Employerest.</span><span class="sc">\\</span><span class="st">)"</span>,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">""</span>,</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>       Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "$137K-$171" "$137K-$171" "$137K-$171" "$137K-$171" "$137K-$171"
[6] "$137K-$171"</code></pre>
</div>
</div>
<p>Let’s see how we can select the numbers that are remaining in the rows: we can use [0-9]+ for this part:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate_wo_spaces, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"[0-9]+"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ $&lt;137&gt;K-$&lt;171&gt;
 [2] │ $&lt;137&gt;K-$&lt;171&gt;
 [3] │ $&lt;137&gt;K-$&lt;171&gt;
 [4] │ $&lt;137&gt;K-$&lt;171&gt;
 [5] │ $&lt;137&gt;K-$&lt;171&gt;
 [6] │ $&lt;137&gt;K-$&lt;171&gt;
 [7] │ $&lt;137&gt;K-$&lt;171&gt;
 [8] │ $&lt;137&gt;K-$&lt;171&gt;
 [9] │ $&lt;137&gt;K-$&lt;171&gt;
[10] │ $&lt;137&gt;K-$&lt;171&gt;
[11] │ $&lt;137&gt;K-$&lt;171&gt;
[12] │ $&lt;137&gt;K-$&lt;171&gt;
[13] │ $&lt;137&gt;K-$&lt;171&gt;
[14] │ $&lt;137&gt;K-$&lt;171&gt;
[15] │ $&lt;137&gt;K-$&lt;171&gt;
[16] │ $&lt;137&gt;K-$&lt;171&gt;
[17] │ $&lt;137&gt;K-$&lt;171&gt;
[18] │ $&lt;137&gt;K-$&lt;171&gt;
[19] │ $&lt;137&gt;K-$&lt;171&gt;
[20] │ $&lt;137&gt;K-$&lt;171&gt;
... and 652 more</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="ot">&lt;-</span> Uncleaned_DS_jobs <span class="sc">|&gt;</span>    </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_wider_regex</span>(     </span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    Salary_Estimate_wo_spaces,     </span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">patterns =</span> <span class="fu">c</span>(</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>      <span class="st">"</span><span class="sc">\\</span><span class="st">$"</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">Low_Limit_For_Salary =</span> <span class="st">"[0-9]+"</span>,       </span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"K-</span><span class="sc">\\</span><span class="st">$"</span>,       </span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">High_Limit_For_Salary =</span> <span class="st">"[0-9]+"</span>  </span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>      )   </span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By using <code>separate_wider_regex()</code> function, we defined the pattern in the data, and we got the new columns as Low_Limit_For_Salary and High_Limit_For_Salary as we wished.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs[<span class="fu">c</span>(<span class="st">"Salary_Estimate"</span>,</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Low_Limit_For_Salary"</span>, </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"High_Limit_For_Salary"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Salary_Estimate              Low_Limit_For_Salary High_Limit_For_Salary
  &lt;chr&gt;                        &lt;chr&gt;                &lt;chr&gt;                
1 $137K-$171K (Glassdoor est.) 137                  171                  
2 $137K-$171K (Glassdoor est.) 137                  171                  
3 $137K-$171K (Glassdoor est.) 137                  171                  
4 $137K-$171K (Glassdoor est.) 137                  171                  
5 $137K-$171K (Glassdoor est.) 137                  171                  
6 $137K-$171K (Glassdoor est.) 137                  171                  </code></pre>
</div>
</div>
<p>For not confusing the numbers later, lets multiply the low limit and high limit numbers with 1000 and make Salary Estimate factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs <span class="ot">&lt;-</span> Uncleaned_DS_jobs <span class="sc">%&gt;%</span>  </span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">Low_Limit_For_Salary =</span> <span class="fu">as.numeric</span>(Low_Limit_For_Salary)<span class="sc">*</span><span class="dv">1000</span>,</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">High_Limit_For_Salary =</span> <span class="fu">as.numeric</span>(High_Limit_For_Salary)<span class="sc">*</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Salary_Estimate)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(Uncleaned_DS_jobs[<span class="fu">c</span>(<span class="st">"Salary_Estimate"</span>,</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"Low_Limit_For_Salary"</span>, </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>                         <span class="st">"High_Limit_For_Salary"</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 3
  Salary_Estimate              Low_Limit_For_Salary High_Limit_For_Salary
  &lt;fct&gt;                                       &lt;dbl&gt;                 &lt;dbl&gt;
1 $137K-$171K (Glassdoor est.)               137000                171000
2 $137K-$171K (Glassdoor est.)               137000                171000
3 $137K-$171K (Glassdoor est.)               137000                171000
4 $137K-$171K (Glassdoor est.)               137000                171000
5 $137K-$171K (Glassdoor est.)               137000                171000
6 $137K-$171K (Glassdoor est.)               137000                171000</code></pre>
</div>
</div>
<ul>
<li>Job Title</li>
</ul>
<p>For Job Title column, first let’s examine it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.factor</span>(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Factor w/ 172 levels "(Sr.) Data Scientist -",..: 156 50 50 50 50 50 65 50 165 50 ...</code></pre>
</div>
</div>
<p>As we can see, we have 172 different levels for Job Titles. We can try to group them by searching common words.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">levels</span>(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.factor</span>(</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>      Uncleaned_DS_jobs<span class="sc">$</span>Job_Title)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "(Sr.) Data Scientist -"                                
[2] "AI Data Scientist"                                     
[3] "AI Ops Data Scientist"                                 
[4] "AI/ML - Machine Learning Scientist, Siri Understanding"
[5] "Analytics - Business Assurance Data Analyst"           
[6] "Analytics Manager"                                     </code></pre>
</div>
</div>
<p>But before that, we can see that some columns have “Senior”, “Manager” words. By using this information, we can create a new column for seniority of the job.</p>
<p>By using <code>str_view()</code> function, first, let’s see that columns;</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">"^Senior|^Sr|^Experience"</span>, </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiline =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] │ &lt;Sr&gt; Data Scientist
 [16] │ &lt;Experience&gt;d Data Scientist
 [34] │ &lt;Senior&gt; Research Statistician- Data Scientist
 [40] │ &lt;Senior&gt; Analyst/Data Scientist
 [47] │ &lt;Senior&gt; Data Scientist
 [57] │ &lt;Senior&gt; Data Scientist
 [93] │ &lt;Senior&gt; Data Scientist
 [99] │ &lt;Senior&gt; Data Scientist
[104] │ &lt;Senior&gt; Data Scientist
[107] │ &lt;Sr&gt; Data Engineer (Sr BI Developer)
[122] │ &lt;Senior&gt; Data Engineer
[123] │ &lt;Senior&gt; Data Scientist
[126] │ &lt;Sr&gt;. ML/Data Scientist - AI/NLP/Chatbot
[130] │ &lt;Sr&gt;. ML/Data Scientist - AI/NLP/Chatbot
[132] │ &lt;Senior&gt; Data Engineer
[137] │ &lt;Senior&gt; Data Engineer
[143] │ &lt;Senior&gt; Data Scientist
[154] │ &lt;Sr&gt; Scientist - Extractables &amp; Leachables
[156] │ &lt;Sr&gt; Data Scientist
[158] │ &lt;Experience&gt;d Data Scientist
... and 51 more</code></pre>
</div>
</div>
<p>By using <code>str_detect()</code> function, we can detect the rows including “Senior”, “Sr”, “Experienced”, “Manager” words. This function returns TRUE if they exist, and returns FALSE if they don’t exist.</p>
<p>By using <code>as.integer()</code> , we assign 1 to exists and 0 to nonexistent.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Senior_Position <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_detect</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">regex</span>(<span class="st">"^(Senior|Sr|Experienced)"</span>)</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>             ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we defined the senior roles, we can assign the same titles to same jobs.</p>
<p>Let’s start by Data Scientist. Let’s find the columns including Data Scientist word.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>         <span class="fu">regex</span>(<span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Scientist.*"</span>, </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">multiline =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] │ &lt;Sr Data Scientist&gt;
 [2] │ &lt;Data Scientist&gt;
 [3] │ &lt;Data Scientist&gt;
 [4] │ &lt;Data Scientist&gt;
 [5] │ &lt;Data Scientist&gt;
 [6] │ &lt;Data Scientist&gt;
 [7] │ &lt;Data Scientist / Machine Learning Expert&gt;
 [8] │ &lt;Data Scientist&gt;
 [9] │ &lt;Staff Data Scientist - Analytics&gt;
[10] │ &lt;Data Scientist&gt;
[11] │ &lt;Data Scientist&gt;
[12] │ &lt;Data Scientist&gt;
[13] │ &lt;Data Scientist - Statistics, Early Career&gt;
[15] │ &lt;Data Scientist&gt;
[16] │ &lt;Experienced Data Scientist&gt;
[17] │ &lt;Data Scientist - Contract&gt;
[18] │ &lt;Data Scientist&gt;
[21] │ &lt;Data Scientist&gt;
[22] │ &lt;Data Scientist/Machine Learning&gt;
[25] │ &lt;Data Scientist&gt;
... and 435 more</code></pre>
</div>
</div>
<p>Bu using <code>str_replace_all()</code> we can replace all the rows including Data Scientist word in some way, directly with “Data Scientist”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Scientist.*"</span>,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Data Scientist"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s get Data Analyst titles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Analyst.*"</span>, </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiline =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [19] │ &lt;Data Analyst II&gt;
 [41] │ &lt;Data Analyst&gt;
 [43] │ &lt;Data Analyst I&gt;
 [51] │ &lt;Data Analyst&gt;
 [55] │ &lt;E-Commerce Data Analyst&gt;
 [61] │ &lt;Data Analyst&gt;
 [65] │ &lt;Global Data Analyst&gt;
 [74] │ &lt;Business Data Analyst&gt;
 [76] │ &lt;Data Analyst&gt;
 [87] │ &lt;Data Analyst&gt;
[111] │ &lt;RFP Data Analyst&gt;
[112] │ &lt;Data Analyst&gt;
[118] │ &lt;Data Analyst/Engineer&gt;
[139] │ &lt;Data Analyst&gt;
[162] │ &lt;Say Business Data Analyst&gt;
[164] │ &lt;Data Analyst&gt;
[167] │ &lt;Senior Data Analyst&gt;
[168] │ &lt;Senior Data Analyst&gt;
[170] │ &lt;Sr Data Analyst&gt;
[175] │ &lt;Data Analyst&gt;
... and 27 more</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Analyst.*"</span>,</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Data Analyst"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s get Data Engineer titles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Engineer.*"</span>, </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiline =</span> <span class="cn">TRUE</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [35] │ &lt;Data Engineer&gt;
 [54] │ &lt;Jr. Data Engineer&gt;
 [66] │ &lt;Data Engineer&gt;
 [71] │ &lt;Data Engineer (Remote)&gt;
 [77] │ &lt;Data Engineer, Enterprise Analytics&gt;
 [83] │ &lt;Data Engineer&gt;
[107] │ &lt;Sr Data Engineer (Sr BI Developer)&gt;
[108] │ &lt;Data Engineer&gt;
[114] │ &lt;Data Engineer&gt;
[120] │ &lt;Data Engineer&gt;
[122] │ &lt;Senior Data Engineer&gt;
[124] │ &lt;Data Engineer&gt;
[129] │ &lt;Data Engineer&gt;
[132] │ &lt;Senior Data Engineer&gt;
[133] │ &lt;Data Engineer&gt;
[137] │ &lt;Senior Data Engineer&gt;
[140] │ &lt;Data Engineer&gt;
[142] │ &lt;Tableau Data Engineer 20-0117&gt;
[153] │ &lt;Data Engineer&gt;
[169] │ &lt;Data Engineer&gt;
... and 27 more</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">".*Data</span><span class="sc">\\</span><span class="st">s+Engineer.*"</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Data Engineer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And Machine Learning Engineers:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">".*Machine</span><span class="sc">\\</span><span class="st">s+Learning.*"</span>, </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiline =</span> <span class="cn">TRUE</span>, </span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [42] │ &lt;Machine Learning Engineer&gt;
 [46] │ &lt;Computational Scientist, Machine Learning&gt;
 [62] │ &lt;Machine Learning Engineer&gt;
 [69] │ &lt;Data &amp; Machine Learning Scientist&gt;
 [89] │ &lt;Machine Learning Engineer&gt;
 [92] │ &lt;Machine Learning Engineer&gt;
[102] │ &lt;Machine Learning Engineer&gt;
[135] │ &lt;Machine Learning Engineer&gt;
[136] │ &lt;Machine Learning Engineer&gt;
[145] │ &lt;Machine Learning Engineer&gt;
[159] │ &lt;Machine Learning Engineer&gt;
[172] │ &lt;Machine Learning Scientist - Bay Area, CA&gt;
[176] │ &lt;Senior Data &amp; Machine Learning Scientist&gt;
[180] │ &lt;Machine Learning Engineer&gt;
[191] │ &lt;Principal Machine Learning Scientist&gt;
[203] │ &lt;Machine Learning Engineer&gt;
[220] │ &lt;Senior Machine Learning Scientist - Bay Area, CA&gt;
[229] │ &lt;Machine Learning Engineer&gt;
[261] │ &lt;Principal Machine Learning Scientist&gt;
[331] │ &lt;Machine Learning Engineer&gt;
... and 16 more</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  <span class="fu">str_replace_all</span>(</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">".*Machine</span><span class="sc">\\</span><span class="st">s+Learning.*"</span>,</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Machine Learning Engineer"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s examine Managers this time:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">".*Analytics</span><span class="sc">\\</span><span class="st">s+Manager.*|.*Data</span><span class="sc">\\</span><span class="st">s+Science</span><span class="sc">\\</span><span class="st">sManager.*|.*Director.*|.*Vice</span><span class="sc">\\</span><span class="st">sPresident.*|.*VP.*|.*Principal.*|.*Manager.*"</span>, </span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">multiline =</span> <span class="cn">TRUE</span>, </span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [86] │ &lt;Data Science Manager, Payment Acceptance - USA&gt;
[150] │ &lt;Analytics Manager&gt;
[198] │ &lt;Principal Scientist/Associate Director, Quality Control and Analytical Technologies&gt;
[218] │ &lt;Analytics Manager - Data Mart&gt;
[266] │ &lt;Director of Data Science&gt;
[272] │ &lt;Manager / Lead, Data Science &amp; Analytics&gt;
[313] │ &lt;Principal Scientist/Associate Director, Quality Control and Analytical Technologies&gt;
[332] │ &lt;Principal Data &amp; Analytics Platform Engineer&gt;
[343] │ &lt;VP, Data Science&gt;
[381] │ &lt;Analytics Manager - Data Mart&gt;
[470] │ &lt;VP, Data Science&gt;
[523] │ &lt;Manager, Field Application Scientist, Southeast&gt;
[564] │ &lt;Data Science Manager&gt;
[581] │ &lt;Vice President, Biometrics and Clinical Data Management&gt;</code></pre>
</div>
</div>
<p>Let’s replace them with “Data Science and Analytics Manager”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">".*Analytics</span><span class="sc">\\</span><span class="st">s+Manager.*|.*Data</span><span class="sc">\\</span><span class="st">s+Science</span><span class="sc">\\</span><span class="st">sManager.*|.*Director.*|.*Vice</span><span class="sc">\\</span><span class="st">sPresident.*|.*VP.*|.*Principal.*|.*Manager.*"</span>,</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Data Science and Analytics Manager"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, bu using <code>str_view()</code> function, we want to see all the jobs that have “Data” in it, but not “Data Analyst”, “Data Scientist,”Data Engineer” or “Data Science and Analytics Manager” because we already took care of that titles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_view</span>(</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>  Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">regex</span>(<span class="st">"^(?!.*Data</span><span class="sc">\\</span><span class="st">s+Analyst.*|.*Data</span><span class="sc">\\</span><span class="st">s+Scientist.*|.*Data</span><span class="sc">\\</span><span class="st">s+Science</span><span class="sc">\\</span><span class="st">s+and</span><span class="sc">\\</span><span class="st">s+Analytics</span><span class="sc">\\</span><span class="st">s+Manager.*|.*Data</span><span class="sc">\\</span><span class="st">sEngineer.*).*data.*"</span>, </span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [14] │ &lt;Data Modeler&gt;
 [24] │ &lt;Business Intelligence Analyst I- Data Insights&gt;
 [56] │ &lt;Data Analytics Engineer&gt;
 [97] │ &lt;Data Analytics Engineer&gt;
[117] │ &lt;Software Engineer - Data Science&gt;
[141] │ &lt;Data Integration and Modeling Engineer&gt;
[187] │ &lt;Production Engineer - Statistics/Data Analysis&gt;
[207] │ &lt;Data Science Instructor&gt;
[214] │ &lt;Data Science Software Engineer&gt;
[219] │ &lt;Data Modeler (Analytical Systems)&gt;
[230] │ &lt;Equity Data Insights Analyst - Quantitative Analyst&gt;
[257] │ &lt;Environmental Data Science&gt;
[370] │ &lt;Data Science Software Engineer&gt;
[382] │ &lt;Data Modeler (Analytical Systems)&gt;
[388] │ &lt;IT Partner Digital Health Technology and Data Science&gt;
[396] │ &lt;Data Solutions Engineer - Data Modeler&gt;
[519] │ &lt;Data Science Software Engineer&gt;
[540] │ &lt;Data Science Analyst&gt;
[545] │ &lt;Data Modeler (Analytical Systems)&gt;
[555] │ &lt;IT Partner Digital Health Technology and Data Science&gt;
... and 3 more</code></pre>
</div>
</div>
<p>We will save these as “Other Data Positions”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">regex</span>(<span class="st">"(?!Data</span><span class="sc">\\</span><span class="st">s+(Analyst|Scientist|Engineer|Science</span><span class="sc">\\</span><span class="st">s+and</span><span class="sc">\\</span><span class="st">s+Analytics</span><span class="sc">\\</span><span class="st">s+Manager)).*Data.*"</span>),</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Other Data Positions"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, we will save all the jobs that are not include “Data” word in it and not “Machine Learning Engineer” into “Others” category because there are a lot of jobs with the titles like Scientist, Researcher etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span>  </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    Uncleaned_DS_jobs<span class="sc">$</span>Job_Title, </span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">regex</span>(<span class="st">"^(?!.*(Data|Machine</span><span class="sc">\\</span><span class="st">s+Learning</span><span class="sc">\\</span><span class="st">s+Engineer)).*$"</span>), </span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Others"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, let’s see our clean job titles:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>Job_Title <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Title)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Title)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      Data Analyst                      Data Engineer 
                                47                                 47 
Data Science and Analytics Manager                     Data Scientist 
                                14                                455 
         Machine Learning Engineer               Other Data Positions 
                                36                                 23 
                            Others 
                                50 </code></pre>
</div>
</div>
<ul>
<li>Job Description</li>
</ul>
<p>When we look at the job description column,</p>
<p>We have so many different values but we can differentiate them into other columns like we can say that a job wants the skill SQL.</p>
<p>First, we need to look the job description column in a detailed way.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">view</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We see some common requirements and common job descriptions for jobs.</p>
<p>For this we can separate the columns like SQL and we can say that this jobs wants an SQL bu using factor 1 or 0.</p>
<p>Let’s start with SQL:</p>
<p>In this we should check if SQL is mentioned in the variable Job_Description</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>sql_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the SQL in the job description</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if SQL is mentioned</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bsql</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we need to create a column called SQL, in this column we will see if SQL is a requirement in the job description or not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>sql_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, sql_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>sql_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>sql_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now for Python we repeat the same process.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>python_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the python in the job description</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if python is mentioned</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bpython</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>python_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, python_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>python_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>python_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now for Excel:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>excel_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the excel in the job description</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if excel is mentioned</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bexcel</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>excel_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, excel_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>excel_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.1161  0.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>excel_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>excel_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Hadoop:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>hadoop_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the hadoop in the job description</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if hadoop is mentioned</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bhadoop</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>hadoop_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, hadoop_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>hadoop_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.2128  0.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>hadoop_needed<span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>hadoop_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Spark:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>spark_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the spark in the job description</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if spark is mentioned</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bspark</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>spark_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, spark_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>spark_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.2664  1.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>spark_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>spark_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For AWS:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>aws_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the AWS in the job description</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if AWS is mentioned</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">baws</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>aws_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, aws_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>aws_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.2009  0.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>aws_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>aws_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Tableau:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>tableau_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the Tableau in the job description</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if Tableau is mentioned</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">btableau</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>tableau_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, tableau_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>tableau_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   0.000   0.000   0.183   0.000   1.000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>tableau_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>tableau_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Big Data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>bigdata_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the Big data in the job description</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if Big data is mentioned</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bbig-data</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>bigdata_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, bigdata_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>bigdata_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00000 0.00000 0.01042 0.00000 1.00000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>bigdata_needed<span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>bigdata_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Numpy:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>numpy_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the Numpy in the job description</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if Numpy is mentioned</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bnumpy</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>numpy_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, numpy_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>numpy_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
0.00000 0.00000 0.00000 0.08482 0.00000 1.00000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>numpy_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>numpy_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Machine Learning:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>ML_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the ML in the job description</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if ML is mentioned</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bmachine learning</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>ML_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, ML_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>ML_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   0.000   1.000   0.619   1.000   1.000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>ML_needed<span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>ML_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Deep Learning:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a>DL_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the DL in the job description</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if DL is mentioned</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bdeep learning</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>DL_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, DL_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>DL_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.1429  0.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>DL_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>DL_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For Statistics:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>stat_mentioned <span class="ot">&lt;-</span> <span class="cf">function</span>(description) {</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We use tolower to match the statistics in the job description</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>  description <span class="ot">&lt;-</span> <span class="fu">tolower</span>(description)</span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Check if statistics is mentioned</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">bstatistics</span><span class="sc">\\</span><span class="st">b"</span>, description)) {</span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">1</span>)</span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="dv">0</span>)</span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>stat_needed <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Uncleaned_DS_jobs<span class="sc">$</span>Job_Description, stat_mentioned)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs<span class="sc">$</span>stat_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.0000  0.0000  0.0000  0.4926  1.0000  1.0000 </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>Uncleaned_DS_jobs<span class="sc">$</span>stat_needed <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(Uncleaned_DS_jobs<span class="sc">$</span>stat_needed)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now Let’s check the new columns in our dataset:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(Uncleaned_DS_jobs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                              Job_Title                       Salary_Estimate
 Data Analyst                      : 47   $75K-$131K (Glassdoor est.) : 32   
 Data Engineer                     : 47   $79K-$131K (Glassdoor est.) : 32   
 Data Science and Analytics Manager: 14   $99K-$132K (Glassdoor est.) : 32   
 Data Scientist                    :455   $137K-$171K (Glassdoor est.): 30   
 Machine Learning Engineer         : 36   $90K-$109K (Glassdoor est.) : 30   
 Other Data Positions              : 23   $56K-$97K (Glassdoor est.)  : 22   
 Others                            : 50   (Other)                     :494   
 Job_Description        Rating      Company_Name         Location        
 Length:672         Min.   :0.000   Length:672         Length:672        
 Class :character   1st Qu.:3.300   Class :character   Class :character  
 Mode  :character   Median :3.800   Mode  :character   Mode  :character  
                    Mean   :3.593                                        
                    3rd Qu.:4.300                                        
                    Max.   :5.000                                        
                                                                         
 Headquarters           Size              Founded     Type_of_Ownership 
 Length:672         Length:672         Min.   :1781   Length:672        
 Class :character   Class :character   1st Qu.:1983   Class :character  
 Mode  :character   Mode  :character   Median :1995   Mode  :character  
                                       Mean   :1984                     
                                       3rd Qu.:2009                     
                                       Max.   :2019                     
                                                                        
   Industry            Sector            Revenue          Competitors       
 Length:672         Length:672         Length:672         Length:672        
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
 Low_Limit_For_Salary High_Limit_For_Salary Senior_Position  sql_needed
 Min.   : 31000       Min.   : 56000        Min.   :0.0000   0:347     
 1st Qu.: 79000       1st Qu.:119000        1st Qu.:0.0000   1:325     
 Median : 91000       Median :133000        Median :0.0000             
 Mean   : 99196       Mean   :148131        Mean   :0.1057             
 3rd Qu.:122000       3rd Qu.:165000        3rd Qu.:0.0000             
 Max.   :212000       Max.   :331000        Max.   :1.0000             
                                                                       
 python_needed excel_needed hadoop_needed spark_needed aws_needed
 0:183         0:594        0:529         0:493        0:537     
 1:489         1: 78        1:143         1:179        1:135     
                                                                 
                                                                 
                                                                 
                                                                 
                                                                 
 tableau_needed bigdata_needed numpy_needed ML_needed DL_needed stat_needed
 0:549          0:665          0:615        0:256     0:576     0:341      
 1:123          1:  7          1: 57        1:416     1: 96     1:331      
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           </code></pre>
</div>
</div>
</section>
<section id="references" class="level2">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>Barr, D., &amp; DeBruine, L. (n.d.). Data Cleaning. <a href="https://rgup.gitlab.io/research_cycle/03_tidyr.html" class="uri">https://rgup.gitlab.io/research_cycle/03_tidyr.html</a></p>
<p>Cotton, R. (2023, February 16). <em>Quarto cheat sheet (previously known as RMarkdown)</em>. DataCamp. <a href="https://www.datacamp.com/cheat-sheet/quarto-cheat-sheet-previously-known-as-r-markdown" class="uri">https://www.datacamp.com/cheat-sheet/quarto-cheat-sheet-previously-known-as-r-markdown</a></p>
<p><em>GREP: Pattern matching and replacement</em>. RDocumentation. (n.d.). <a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep" class="uri">https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/grep</a></p>
<p>Rahman, R. (n.d.). [Dataset] Data Science Job Posting on Glassdoor. Retrieved December 20, 2023,. <a href="https://www.kaggle.com/datasets/rashikrahmanpritom/data-science-job-posting-on-glassdoor/data" class="uri">https://www.kaggle.com/datasets/rashikrahmanpritom/data-science-job-posting-on-glassdoor/data</a></p>
<p>Wickham, H., Çetinkaya-Rundel, M., &amp; Grolemund, G. (2023). <em>R for Data Science: Import, Tidy, transform, visualize, and model data</em>. O’Reilly Media, Inc.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>